<navbar></navbar>

<div class="container">
  <div class="row">
    <div class="col-sm-12">
      <h1>Users</h1>
    </div>
    <div class="col-sm-12">
      <form
        id="user-add-form"
        class="row-fluid form-horizontal col-sm-6 well"
        name="addUserForm">
        <div ng-repeat="error in vm.userError" class="col-sm-12">
          <div class="alert alert-danger animated fadeIn">
            {{error.msg}}
          </div>
        </div>
        <div data-ng-repeat="field in vm.userSchema">
          <div class="form-group row">
            <label
              for="user-add-{{field['title']}}"
              class="col-sm-2 control-label">
              {{field['title']}}
            </label>
            <div class="col-sm-10">
              <input
                data-ng-if="(field['type'] == 'text' || field['type'] == 'email' || field['type'] == 'password')"
                type="{{field['type']}}"
                class="span2 form-control"
                data-ng-model="user[field['schemaKey']]"
                placeholder="{{field['title']}}"
                id="user-add-{{field['title']}}"
                required/>
              <select
                data-ng-if="field['type'] == 'select'"
                data-ng-model="user[field['schemaKey']]"
                ng-multiple="true"
                multiple
                ng-options="option for option in field['options']"
                class="form-control"
                required>
              </select>
            </div>
          </div>
        </div>
        <div class="col-sm-offset-2 col-sm-4">
          <button  class="btn" ng-click="vm.add(addUserForm.$valid)">Add</button>
          <input class="btn" type="button" value="Cancel" ng-click="vm.showForm = false; vm.user= {}"/>
        </div>
      </form>

      <table class="table table-striped table-bordered table-hover editable-table" data-ng-show="vm.users.length">
        <tr>
          <th>
            Edit
          </th>
          <th data-ng-repeat="field in vm.userSchema" data-ng-if="field.inTable">{{field.title}}</th>
        </tr>
        <tr data-ng-repeat="user in vm.users">
          <td>
            <button class="btn btn-danger glyphicon glyphicon-trash" data-ng-click="vm.remove(user)" value="del">
              <i class="icon-trash icon-white"></i>
            </button>
          </td>
          <td
            class="table-editable-cell"
            data-ng-repeat="field in vm.userSchema"
            data-ng-if="field.inTable">
        <span
          data-ng-if="(field['type'] == 'text' || field['type'] == 'email')"
          class="editable-span"
          data-ng-editable="vm.update(user)"
          data-ng-editable-model="user[field['schemaKey']]">
        </span>
        <span
          data-ng-click="vm.beforeSelect(field['schemaKey'], user)"
          data-ng-if="(field['type'] == 'select')"
          class="editable-span"
          data-ng-editable-select="vm.update(user, field['schemaKey'])"
          data-ng-editable-select-model="user[field['schemaKey']]"
          data-ng-editable-select-options="field['options']">
        </span>
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>
