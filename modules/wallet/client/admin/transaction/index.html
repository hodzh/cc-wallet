<navbar></navbar>

<div class="container">
  <div class="row">
    <div class="col-sm-12">
      <h1>Transactions</h1>
    </div>
    <div class="col-sm-12">
      <form
        id="transaction-add-form"
        class="row-fluid form-horizontal col-sm-6 well"
        name="addTransactionForm">
        <div ng-repeat="error in vm.errors" class="col-sm-12">
          <div class="alert alert-danger animated fadeIn">
            {{error.msg}}
          </div>
        </div>
        <div ng-repeat="field in vm.transactionSchema">
          <div class="form-group row">
            <label
              for="transaction-add-{{field['title']}}"
              class="col-sm-2 control-label">
              {{field['title']}}
            </label>
            <div class="col-sm-10">
              <input
                ng-if="(field['type'] == 'text' || field['type'] == 'email' || field['type'] == 'password')"
                type="{{field['type']}}"
                class="span2 form-control"
                ng-model="transaction[field['schemaKey']]"
                placeholder="{{field['title']}}"
                id="transaction-add-{{field['title']}}"
                required/>
              <select
                ng-if="field['type'] == 'select'"
                ng-model="transaction[field['schemaKey']]"
                ng-multiple="true"
                multiple
                ng-options="option for option in field['options']"
                class="form-control"
                required>
              </select>
            </div>
          </div>
        </div>
        <div class="col-sm-offset-2 col-sm-4">
          <button  class="btn" ng-click="vm.add(addTransactionForm.$valid)">Add</button>
          <input class="btn" type="button" value="Cancel" ng-click="vm.showForm = false; vm.transaction= {}"/>
        </div>
      </form>

      <table class="table table-striped table-bordered table-hover editable-table" ng-show="vm.transactions.length">
        <tr>
          <th>
            Edit
          </th>
          <th ng-repeat="field in vm.transactionSchema" ng-if="field.inTable">{{field.title}}</th>
        </tr>
        <tr ng-repeat="transaction in vm.transactions">
          <td>
            <button class="btn btn-danger glyphicon glyphicon-trash" ng-click="vm.remove(transaction)" value="del">
              <i class="icon-trash icon-white"></i>
            </button>
          </td>
          <td
            class="table-editable-cell"
            ng-repeat="field in vm.transactionSchema"
            ng-if="field.inTable">
            <span
              ng-if="(field['type'] == 'text' || field['type'] == 'email')"
              class="editable-span"
              ng-editable="vm.update(transaction)"
              ng-editable-model="transaction[field['schemaKey']]">
            </span>
            <span
              ng-click="vm.beforeSelect(field['schemaKey'], transaction)"
              ng-if="(field['type'] == 'select')"
              class="editable-span"
              ng-editable-select="vm.update(transaction, field['schemaKey'])"
              ng-editable-select-model="transaction[field['schemaKey']]"
              ng-editable-select-options="field['options']">
            </span>
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>