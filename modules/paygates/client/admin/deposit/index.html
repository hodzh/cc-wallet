<navbar></navbar>

<div class="container">
  <div class="row">
    <div class="col-sm-12">
      <h1>Deposit</h1>
    </div>
    <div class="col-sm-12">
      <form
        id="deposit-add-form"
        class="row-fluid form-horizontal col-sm-6 well"
        name="addDepositForm">
        <div data-ng-repeat="error in vm.errors" class="col-sm-12">
          <div class="alert alert-danger animated fadeIn">
            {{error.msg}}
          </div>
        </div>
        <div data-ng-repeat="field in vm.depositSchema">
          <div class="form-group row">
            <label
              for="deposit-add-{{field['title']}}"
              class="col-sm-2 control-label">
              {{field['title']}}
            </label>

            <div class="col-sm-10">
              <input
                data-ng-if="(field['type'] == 'text' || field['type'] == 'email' || field['type'] == 'password')"
                data-ng-model="deposit[field['schemaKey']]"
                type="{{field['type']}}"
                class="span2 form-control"
                placeholder="{{field['title']}}"
                id="deposit-add-{{field['title']}}"
                required/>
              <label>
                <select
                  data-ng-if="field['type'] == 'select'"
                  data-ng-model="deposit[field['schemaKey']]"
                  data-ng-multiple="true"
                  multiple
                  data-ng-options="option for option in field['options']"
                  class="form-control"
                  required>
                </select>
              </label>
            </div>
          </div>
        </div>
        <div class="col-sm-offset-2 col-sm-4">
          <button
            class="btn"
            data-ng-click="vm.add(addDepositForm.$valid)">
            Add
          </button>
          <input
            class="btn"
            type="button"
            value="Cancel"
            data-ng-click="vm.showForm = false; vm.deposit= {}"/>
        </div>
      </form>

      <table
        class="table table-striped table-bordered table-hover editable-table"
        data-ng-show="vm.deposits.length">
        <tr>
          <th>
            <label>
              <input type="checkbox">
            </label>
          </th>
          <th>
            Action
          </th>
          <th data-ng-repeat="field in vm.depositSchema" data-ng-if="field.inTable">
            {{field.title}}
          </th>
        </tr>
        <tr data-ng-repeat="deposit in vm.deposits">
          <td>
            <label>
              <input type="checkbox">
            </label>
          </td>
          <td>
            <button
              class="btn btn-danger glyphicon glyphicon-trash"
              data-ng-click="vm.remove(deposit)">
              <i class="icon-trash icon-white"></i>
            </button>
            <button
              class="btn"
              data-ng-click="vm.refresh(deposit)">
              Refresh
            </button>
            <div>
              <label>
                <input type="number" ng-model="amount">
              </label>
              <button
                class="btn"
                data-ng-click="vm.income(deposit, amount)">
                Income
              </button>
              <button
                class="btn"
                data-ng-click="vm.outcome(deposit, amount)">
                Outcome
              </button>
            </div>
          </td>
          <td
            class="table-editable-cell"
            data-ng-repeat="field in vm.depositSchema"
            data-ng-if="field.inTable">
            <span
              data-ng-if="(field['type'] == 'text' || field['type'] == 'email')"
              class="editable-span"
              data-ng-editable="vm.update(deposit)"
              data-ng-editable-model="deposit[field['schemaKey']]">
            </span>
            <span
              data-ng-click="vm.beforeSelect(field['schemaKey'], deposit)"
              data-ng-if="(field['type'] == 'select')"
              class="editable-span"
              data-ng-editable-select="vm.update(deposit, field['schemaKey'])"
              data-ng-editable-select-model="deposit[field['schemaKey']]"
              data-ng-editable-select-options="field['options']">
            </span>
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>